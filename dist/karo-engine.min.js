var KaroEngine;(()=>{"use strict";var t={607:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var o=i(86);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return o.Game}}),Object.defineProperty(e,"Character",{enumerable:!0,get:function(){return o.Character}}),Object.defineProperty(e,"Math",{enumerable:!0,get:function(){return o.Math}})},960:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&o(e,t,i);return n(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(i(305)),l=i(950),h=a(i(226)),u=i(539),p=a(i(940)),d=a(i(975)),c=function(){function t(t){this.oldTime=0,this.assetsLoader=new h.default,this._devMode="on",this.Render=new s.Render,this.Storage=new s.Storage(this),this.camera=new p.default(this),this.dataStorage=new d.default(this),this.store=this.dataStorage.dataMap,this.ref=this.dataStorage.ref.bind(this.dataStorage),this.load=this.assetsLoader.load.bind(this.assetsLoader),this.delete=this.assetsLoader.delete.bind(this.assetsLoader),this.asset=this.assetsLoader.asset.bind(this.assetsLoader),this.check=this.assetsLoader.asset.bind(this.assetsLoader),this.add=this.Storage.add.bind(this.Storage),this.child=this.Storage.child.bind(this.Storage),this.has=this.Storage.has.bind(this.Storage),this.keyboardEvent=new u.KeyboardEventManager(this),this.register=this.keyboardEvent.register.bind(this.keyboardEvent),this.unregister=this.keyboardEvent.unregister.bind(this.keyboardEvent),this.canvas=t,this.graphic=this.canvas.getContext("2d"),this.Updater=new s.Updater(this.canvas,this,this,this.Storage,this.Render)}return Object.defineProperty(t.prototype,"developmentMode",{get:function(){return this._devMode},set:function(t){this._devMode=t},enumerable:!1,configurable:!0}),t.prototype.draw=function(t){var e=this,i=(t-this.oldTime)/1e3;this.oldTime=t,this.assetsLoader.isAssetsLoaded().then((function(){e.graphic.clearRect(0,0,e.canvas.width,e.canvas.height),e._devMode,e.Updater.update(i),e.Render.render(e.graphic,new l.Vector2(0,0),new l.Vector2(1,1),0)}))},t.prototype.onKeyPress=function(t){"off"==this._devMode&&this.keyboardEvent.onKeyPress(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.camera.offset},set:function(t){this.camera.offset=t},enumerable:!1,configurable:!0}),t}();e.default=c},618:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Arc",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,anticlockwise:null!=e.anticlockwise&&e.anticlockwise,color:null!=e.color?e.color:new s.Color(0,0,0,1),radius:null!=e.radius?e.radius:10,"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0),"start angle":null!=e["start angle"]?e["start angle"]:0,"end angle":null!=e["end angle"]?e["end angle"]:360}),i}return n(e,t),e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=o+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.beginPath(),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.fill()):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.stroke()),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(r.Container);e.default=l},717:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Box",i.propertyManager.scheme({height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new s.Color(0,0,0,0),"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0)}),i}return n(e,t),e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=o+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.lineWidth=this.get("line width"),t.beginPath(),1==this.get("fill")?t.fillStyle=this.get("color").toString():0==this.get("fill")&&(t.strokeStyle=this.get("color").toString()),t.rect(this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height")),1==this.get("fill")?t.fill():0==this.get("fill")&&t.stroke(),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(r.Container);e.default=l},762:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Condition",i.propertyManager.scheme({play:null!=e.play&&e.play,condition:null!=e.condition?e.condition:"equal to","left side":null!=e["left side"]?e["left side"]:0,"right side":null!=e["right side"]?e["right side"]:0}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return n(e,t),e.prototype.update=function(t){this.get("is initalize")&&!this.get("is destroyed")&&(this.get("condition"),this.get("right side"),this.get("left side"),1==this.get("play")&&this.set("play",!1),this.Updater.update(t))},e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=o,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=r},322:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&o(e,t,i);return n(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(i(670)),l=i(950),h=r(i(305)),u=a(i(975)),p=function(){function t(t){this.Render=new h.Render,this.Storage=new h.Storage(this),this.dataStorage=new u.default(this),this.displaySize={x:40,y:50},this.propertyManager=new s.default,this.set=this.propertyManager.set.bind(this.propertyManager),this.get=this.propertyManager.get.bind(this.propertyManager),this.add=this.Storage.add.bind(this.Storage),this.entry=this.propertyManager.entry.bind(this.propertyManager),this.child=this.Storage.child.bind(this.Storage),this.store=this.dataStorage.dataMap,this.ref=this.dataStorage.ref.bind(this.dataStorage),this.has=this.Storage.has.bind(this.Storage),this._type="Container",this.propertyManager.scheme({name:t.name,"is destroyed":!1,"is initalize":!1,path:String(),opacity:null!=t.opacity?t.opacity:1,position:null!=t.position?t.position:new l.Vector2(0,0),scale:null!=t.scale?t.scale:new l.Vector2(1,1),rotation:null!=t.rotation?t.rotation:0,visible:null==t.visible||t.visible,"z index":null!=t["z index"]?t["z index"]:1})}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!1,configurable:!0}),t.prototype.initalize=function(t,e,i){this._parent=i,this._game=e,this.canvas=t,this.set("is initalize",!0),this.Updater=new h.Updater(this.canvas,this._game,this,this.Storage,this.Render)},t.prototype.destroy=function(){this.set("is destroyed",!0)},t.prototype.update=function(t){this.get("is initalize")&&!this.get("is destroyed")&&this.Updater.update(t)},t.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=o+this.get("rotation"),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},t}();e.default=p},417:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i.currentIndex=0,i._type="Image",i.propertyManager.scheme({source:null!=e.source?e.source:Array(),rate:null!=e.rate?e.rate:1,height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0)}),i}return n(e,t),e.prototype.update=function(t){if(this.get("is initalize")&&!this.get("is destroyed")){if(1==this.get("source").length)this.currentIndex=0;else if(this.get("source").length>1){this.currentTime+=t;var e=this.get("rate");this.currentTime>=e&&(this.currentIndex+=1,this.currentTime=0,this.currentIndex=this.currentIndex>this.get("source").length-1?0:this.currentIndex)}this.Updater.update(t)}},e.prototype.render=function(t,e,i,o){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=o+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y;var n=this.get("source")[this.currentIndex];if(null!=n){var r=this.game.asset(n);null!=r&&"image"==r.type&&t.drawImage(r.data,this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height"))}t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(r.Container);e.default=l},295:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Loop",i.propertyManager.scheme({time:null!=e.time?e.time:0,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return n(e,t),e.prototype.update=function(t){this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(r([],Array.from(Array(this.get("time")).keys()),!0).forEach((function(t){})),this.set("play",!1)),this.Updater.update(t))},e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=o,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=a},759:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.audio=null,i._type="Sound",i.propertyManager.scheme({source:null!=e.source?e.source:String(),repeat:null!=e.repeat&&e.repeat,rate:null!=e.rate?e.rate:1,volume:null!=e.volume?e.volume:100,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return n(e,t),e.prototype.update=function(t){var e=this;if(this.get("is initalize")&&!this.get("is destroyed")){if(null==this.audio){var i=this.get("source"),o=this.game.asset(i);null!=o&&"audio"==o.type&&(this.audio=o.data.cloneNode(!0))}else this.audio.volume=this.get("volume")/100,this.audio.loop=this.get("repeat"),this.audio.playbackRate=this.get("rate"),this.audio.onended=function(){var t;e.get("repeat")||(e.set("play",!1),null===(t=e.audio)||void 0===t||t.pause())};null!=this.audio&&(1==this.get("play")?this.audio.paused&&this.audio.play():0==this.get("play")&&this.audio.pause()),this.Updater.update(t)}},e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=o,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=r},17:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Text",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new s.Color(0,0,0,0),"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0),"font size":null!=e["font size"]?e["font size"]:16,"font style":null!=e["font style"]?e["font style"]:"normal","font variant":null!=e["font variant"]?e["font variant"]:"normal","font weight":null!=e["font weight"]?e["font weight"]:"normal","font family":null!=e["font family"]?e["font family"]:"sans-serif","text align":null!=e["text align"]?e["text align"]:"center","text baseline":null!=e["text baseline"]?e["text baseline"]:"middle",text:null!=e.text?e.text:"Hello, world!"}),i}return n(e,t),e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=o+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.font=this.get("font style")+" "+this.get("font variant")+" "+this.get("font weight")+" "+this.get("font size")+"px "+this.get("font family"),t.textAlign=this.get("text align"),t.textBaseline=this.get("text baseline"),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.fillText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y)):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.strokeText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y)),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(r.Container);e.default=l},456:function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i._type="Timer",i.propertyManager.scheme({"wait time":null!=e["wait time"]?e["wait time"]:1,play:null!=e.play&&e.play,repeat:null!=e.repeat&&e.repeat}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return n(e,t),e.prototype.update=function(t){var e=this.get("wait time"),i=this.get("repeat");this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(this.currentTime+=t,this.currentTime>=e&&(this.currentTime=0,i||this.set("play",!1))),this.Updater.update(t))},e.prototype.render=function(t,e,i,o){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=o,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=r},518:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.Image=e.Condition=e.Timer=e.Loop=e.Box=e.Text=e.Arc=e.Container=void 0;var n=o(i(322));e.Container=n.default;var r=o(i(618));e.Arc=r.default;var a=o(i(17));e.Text=a.default;var s=o(i(717));e.Box=s.default;var l=o(i(295));e.Loop=l.default;var h=o(i(762));e.Condition=h.default;var u=o(i(456));e.Timer=u.default;var p=o(i(417));e.Image=p.default;var d=o(i(759));e.Sound=d.default},86:function(t,e,i){var o=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&o(e,t,i);return n(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var s=a(i(960));e.Game=s.default;var l=r(i(518));e.Character=l;var h=r(i(950));e.Math=h},515:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),this.red=t,this.blue=i,this.green=e,this.alpha=o}return t.prototype.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},t.prototype.toArray=function(){return[this.red,this.green,this.blue,this.alpha]},t.prototype.fromArray=function(e){return new t(null!=e[0]?e[0]:0,null!=e[1]?e[1]:0,null!=e[2]?e[2]:0,null!=e[3]?e[3]:1)},t.prototype.toObject=function(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}},t.prototype.fromObject=function(e){return new t(e.red,e.green,e.blue,e.alpha)},t}();e.default=i},893:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this._x=null!=t?t:0,this._y=null!=e?e:0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this._y=t},enumerable:!1,configurable:!0}),t.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this;if(1==e.length){var n=e[0];o=new t(o.x+n.x,o.y+n.y)}else e.length>1&&e.forEach((function(t){o=o.add(t)}));return o},t.prototype.substr=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this;if(1==e.length){var n=e[0];o=new t(o.x-n.x,o.y-n.y)}else e.length>1&&e.forEach((function(t){o=o.substr(t)}));return o},t.prototype.dot=function(t){return this._x*t.x+this._y*t.y},t.prototype.divide=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this;if(1==e.length){var n=e[0];o=new t(o.x/n.x,o.y/n.y)}else e.length>1&&e.forEach((function(t){o=o.divide(t)}));return o},t.prototype.multiply=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this;if(1==e.length){var n=e[0];o="number"==typeof n?new t(o.x*n,o.y*n):new t(o.x*n.x,o.y*n.y)}else e.length>1&&e.forEach((function(t){o=o.multiply(t)}));return o},t.prototype.toArray=function(){return[this._x,this._y]},t.prototype.toString=function(){return"("+this._x+", "+this._y+")"},t.prototype.toObject=function(){return{x:this._x,y:this._y}},t.prototype.angle=function(){return Math.tan(this._y/this._x)},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(Math.abs(this._x),2)+Math.pow(Math.abs(this._y),2))},t.prototype.normalize=function(){var e=this.magnitude(),i=new t(0,0);return e>1e-5&&(i.setX=this.x/e,i.setY=this.y/e),i},t}();e.default=i},65:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=void 0;var i=Math.PI,o=Math.E,n=Math.SQRT1_2,r=Math.SQRT2,a=Math.LN10,s=Math.LN2,l=Math.LOG10E,h=Math.LOG2E;e.PI=i,e.E=o,e.SQRT1_2=n,e.SQRT2=r,e.LN10=a,e.LN2=s,e.LOG10E=l,e.LOG2E=h,Math.floor},549:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.random=e.ceil=e.expm1=e.exp=e.abs=void 0;var o=i(950);e.abs=function(t){return"number"==typeof t?Math.abs(t):new o.Vector2(Math.abs(t.x),Math.abs(t.y))},e.exp=function(t){return"number"==typeof t?Math.exp(t):new o.Vector2(Math.exp(t.x),Math.exp(t.y))},e.expm1=function(t){return"number"==typeof t?Math.expm1(t):new o.Vector2(Math.expm1(t.x),Math.expm1(t.y))},e.ceil=function(t){return"number"==typeof t?Math.ceil(t):new o.Vector2(Math.ceil(t.x),Math.ceil(t.y))},e.random=function(t,e){return t+Math.random()*(e-t)}},950:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ceil=e.abs=e.random=e.expm1=e.exp=e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=e.Color=e.Vector2=void 0;var n=o(i(515));e.Color=n.default;var r=i(65);Object.defineProperty(e,"PI",{enumerable:!0,get:function(){return r.PI}}),Object.defineProperty(e,"E",{enumerable:!0,get:function(){return r.E}}),Object.defineProperty(e,"SQRT1_2",{enumerable:!0,get:function(){return r.SQRT1_2}}),Object.defineProperty(e,"SQRT2",{enumerable:!0,get:function(){return r.SQRT2}}),Object.defineProperty(e,"LOG2E",{enumerable:!0,get:function(){return r.LOG2E}}),Object.defineProperty(e,"LN10",{enumerable:!0,get:function(){return r.LN10}}),Object.defineProperty(e,"LN2",{enumerable:!0,get:function(){return r.LN2}}),Object.defineProperty(e,"LOG10E",{enumerable:!0,get:function(){return r.LOG10E}});var a=i(549);Object.defineProperty(e,"exp",{enumerable:!0,get:function(){return a.exp}}),Object.defineProperty(e,"expm1",{enumerable:!0,get:function(){return a.expm1}}),Object.defineProperty(e,"random",{enumerable:!0,get:function(){return a.random}}),Object.defineProperty(e,"abs",{enumerable:!0,get:function(){return a.abs}}),Object.defineProperty(e,"ceil",{enumerable:!0,get:function(){return a.ceil}});var s=o(i(893));e.Vector2=s.default},226:function(t,e){var i=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))((function(n,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.assetsToLoad=Array(),this.assetsLoaded=new Map,this.supportedImageFormat=new Set(["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"]),this.supportedAudioFormat=new Set(["wav","mp3","mp4a","mpga","mp2","mp2a","m2a","m3a","oga","ogg","spx","opus","aac","weba","caf","flac"]),this.supportedFontFormat=new Set(["ttf","woff","otf","woff2"])}return t.prototype.load=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){var i=e.split(".").pop();null!=i?(i=i.toLowerCase(),t.supportedImageFormat.has(i)?t.assetsToLoad.push({type:"image",path:e}):t.supportedAudioFormat.has(i)?t.assetsToLoad.push({type:"audio",path:e}):t.supportedFontFormat.has(i)?t.assetsToLoad.push({type:"font",path:e}):console.error("Asset format is not supported")):console.error("Asset need to have an extension name")}))},t.prototype.loadAudio=function(t){var e=this;if("audio"==t.type){var i=new Audio(t.path);i.onloadeddata=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"audio",data:i})},i.onerror=function(){console.error("Failed to load audio asset from '"+t.path+"'")}}},t.prototype.loadImage=function(t){var e=this;if("image"==t.type){var i=new Image;i.src=t.path,i.onload=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"image",data:i})},i.onerror=function(){console.error("Failed to load image asset from '"+t.path+"'")}}},t.prototype.loadFont=function(t){var e=this,i=Object(window).FontFace,o=t.path.split("/").pop().replace(/\..+/,"");new i(o,"url("+t.path+")").load().then((function(i){Object(document).fonts.add(i),e.assetsLoaded.set(o,{type:"font",data:t.path})})).catch((function(){console.error("Failed to load font asset from '"+t.path+"'")}))},t.prototype.delete=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){t.assetsLoaded.delete(e)}))},t.prototype.check=function(t){return this.assetsLoaded.has(t)},t.prototype.asset=function(t){return this.assetsLoaded.has(t)?this.assetsLoaded.get(t):null},t.prototype.isAssetsLoaded=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){return this.assetsToLoad.forEach((function(e){"image"==e.type?t.loadImage(e):"audio"==e.type?t.loadAudio(e):"font"==e.type&&t.loadFont(e)})),this.assetsToLoad.length=0,[2]}))}))},t}();e.default=n},940:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=i(950),n=function(){function t(t){this._offset=new o.Vector2(0,0),this.game=t}return Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),t}();e.default=n},975:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.dataMap=new Map,this.parent=t}return t.prototype.ref=function(t){return this.parent.has(t)?this.parent.child(t).store:null},t}();e.default=i},774:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.keyMap=new Map,this.game=t}return t.prototype.register=function(t){this.keyMap.set(t,String())},t.prototype.unregister=function(t){this.keyMap.delete(t)},t.prototype.onKeyPress=function(t){var e=new Set(["Shift","Control","Alt"]),i=String();t.ctrlKey&&(i=i.concat("CTRL+".toUpperCase())),t.shiftKey&&(i=i.concat("SHIFT+".toUpperCase())),t.altKey&&(i=i.concat("ALT+".toUpperCase())),e.has(t.key)||(i=i.concat(t.key.toUpperCase())),this.keyMap.has(i)&&console.log(i)},t}();e.default=i},539:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardEventManager=void 0;var n=o(i(774));e.KeyboardEventManager=n.default},670:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=i(950),n=function(){function t(){this.propertyMap=new Map}return t.prototype.scheme=function(t){for(var e in t){var i=t[e];if("object"!=typeof i||i instanceof o.Vector2||i instanceof o.Color)n="number"==typeof i?"number":"string"==typeof i?"string":"boolean"==typeof i?"boolean":Array.isArray(i)?"Array<string>":i instanceof o.Vector2?"Vector2":"Color",this.propertyMap.set(e,{value:i,type:n});else{var n="string";n=null!=i.type?i.type:"number"==typeof i?"number":"string"==typeof i?"string":"boolean"==typeof i?"boolean":Array.isArray(i)?"Array<string>":i instanceof o.Vector2?"Vector2":"Color",this.propertyMap.set(e,{value:i.value,type:n})}}},t.prototype.get=function(t){return this.propertyMap.has(t)?this.propertyMap.get(t).value:null},t.prototype.set=function(t,e){this.propertyMap.has(t)&&this.propertyMap.set(t,{value:e,type:this.propertyMap.get(t).type})},t.prototype.has=function(t){return this.propertyMap.has(t)},t.prototype.delete=function(t){this.propertyMap.delete(t)},t.prototype.entry=function(){return this.propertyMap},t}();e.default=n},328:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.renderMap=new Map,this.renderIndexArray=Array()}return t.prototype.add=function(t,e){this.renderMap.has(t)?(this.renderMap.get(t).push(e),this.renderIndexArray.includes(t)||this.renderIndexArray.push(t)):(this.renderIndexArray.push(t),this.renderMap.set(t,[e]))},t.prototype.render=function(t,e,i,o){var n=this;this.renderIndexArray.sort(),this.renderIndexArray.forEach((function(r){n.renderMap.has(r)&&n.renderMap.get(r).forEach((function(n){n.get("is destroyed")||n.render(t,e,i,o)}))})),this.renderIndexArray.length=0,this.renderMap.clear()},t}();e.default=i},82:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.storageMap=new Map,this.predefineCharacterList=Array(),this.character=t}return t.prototype.list=function(){return Array.from(this.storageMap.values())},t.prototype.listPredefineCharacter=function(){return this.predefineCharacterList},t.prototype.nativeAdd=function(t){this.storageMap.set(t.get("name"),t)},t.prototype.add=function(t){this.predefineCharacterList.push(t)},t.prototype.has=function(t){var e=!1,i=t.split("/"),o=this.character;return 1==i.length?e=this.storageMap.has(i[0]):i.length>1?i.forEach((function(t){null!=o&&o.has(t)?(o=o.child(t),e=!0):e=!1})):e=!1,e},t.prototype.clear=function(){this.storageMap.clear(),this.predefineCharacterList.length=0},t.prototype.child=function(t){var e=this,i=null,o=t.split("/");return 1==o.length?i=this.storageMap.has(o[0])?this.storageMap.get(o[0]):null:o.length>1?o.forEach((function(t){i=t!=String()?null==i?e.storageMap.has(t)?e.storageMap.get(t):null:i.has(t)?i.child(t):null:null})):i=null,i},t}();e.default=i},264:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=i(607),n=function(){function t(t,e,i,o,n){this.canvas=t,this.game=e,this.character=i,this.render=n,this.storage=o}return t.prototype.update=function(t){var e=this,i=this.storage.list(),n=this.storage.listPredefineCharacter();n.forEach((function(t){t.get("is initalize")||(t.initalize(e.canvas,e.game,e.character),i.push(t))})),n.length=0,this.storage.clear(),i.forEach((function(i){if(!i.get("is destroyed")){var n=String();n=e.character instanceof o.Game?n.concat(i.get("name")):n.concat(e.character.get("path")).concat("/").concat(i.get("name")),i.set("path",n),i.update(t),e.storage.nativeAdd(i),e.render.add(i.get("z index"),i)}}))},t}();e.default=n},305:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Render=e.Updater=e.Storage=void 0;var n=o(i(328));e.Render=n.default;var r=o(i(82));e.Storage=r.default;var a=o(i(264));e.Updater=a.default}},e={},i=function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}(607);KaroEngine=i})();