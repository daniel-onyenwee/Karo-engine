var KaroEngine;(()=>{"use strict";var t={607:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var r=i(86);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return r.Game}}),Object.defineProperty(e,"Character",{enumerable:!0,get:function(){return r.Character}}),Object.defineProperty(e,"Math",{enumerable:!0,get:function(){return r.Math}})},960:function(t,e,i){var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(305)),l=i(950),h=a(i(226)),p=i(539),u=a(i(940)),c=a(i(670)),d=a(i(986)),f=a(i(437)),y=function(){function t(t){this.oldTime=0,this.assetsLoader=new h.default,this.Render=new s.Render,this.Storage=new s.Storage(this),this.camera=new u.default(this),this.propertyManager=new c.default,this.eventEmitter=new f.default(this),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.set=this.propertyManager.set.bind(this.propertyManager),this.store=new d.default(this),this.get=this.propertyManager.get.bind(this.propertyManager),this.load=this.assetsLoader.load.bind(this.assetsLoader),this.delete=this.assetsLoader.delete.bind(this.assetsLoader),this.asset=this.assetsLoader.asset.bind(this.assetsLoader),this.check=this.assetsLoader.asset.bind(this.assetsLoader),this.add=this.Storage.add.bind(this.Storage),this.child=this.Storage.child.bind(this.Storage),this.has=this.Storage.has.bind(this.Storage),this.keyboardEvent=new p.KeyboardEventManager(this),this.register=this.keyboardEvent.register.bind(this.keyboardEvent),this.unregister=this.keyboardEvent.unregister.bind(this.keyboardEvent),this.propertyManager.scheme({"background color":null!=t["background color"]?t["background color"]:new l.Color(255,255,255,1),name:null!=t.name?t.name:"New Game",author:null!=t.author?t.author:"Quality Builder",description:null!=t.description?t.description:String(),version:null!=t.version?t.version:"1.0.0",icon:null!=t.icon?t.icon:String()}),this.canvas=t.canvas,this.graphic=this.canvas.getContext("2d"),this.Updater=new s.Updater(this.canvas,this,this,this.Storage,this.Render)}return Object.defineProperty(t.prototype,"tree",{get:function(){return this.Storage.characterTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return"Game"},enumerable:!1,configurable:!0}),t.prototype.draw=function(t){var e=this,i=(t-this.oldTime)/1e3;this.oldTime=t,this.canvas.style.backgroundColor=this.get("background color").toString(),this.assetsLoader.isAssetsLoaded().then((function(){e.graphic.clearRect(0,0,e.canvas.width,e.canvas.height),e.Updater.update(i),e.Render.render(e.graphic,new l.Vector2(0,0),new l.Vector2(1,1),0)}))},t.prototype.onKeyPress=function(t){this.keyboardEvent.onKeyPress(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.camera.offset},set:function(t){this.camera.offset=t},enumerable:!1,configurable:!0}),t}();e.default=y},618:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Arc",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,anticlockwise:null!=e.anticlockwise&&e.anticlockwise,color:null!=e.color?e.color:new s.Color(0,0,0,1),radius:null!=e.radius?e.radius:10,"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0),"start angle":null!=e["start angle"]?e["start angle"]:0,"end angle":null!=e["end angle"]?e["end angle"]:360}),i}return o(e,t),e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=r+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.beginPath(),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.fill()):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.stroke()),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(n.Container);e.default=l},717:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Box",i.propertyManager.scheme({height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new s.Color(0,0,0,1),"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0)}),i}return o(e,t),e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=r+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.lineWidth=this.get("line width"),t.beginPath(),1==this.get("fill")?t.fillStyle=this.get("color").toString():0==this.get("fill")&&(t.strokeStyle=this.get("color").toString()),t.rect(this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height")),1==this.get("fill")?t.fill():0==this.get("fill")&&t.stroke(),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(n.Container);e.default=l},762:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Condition",i.propertyManager.scheme({play:null!=e.play&&e.play,condition:null!=e.condition?e.condition:"equal to","left side":null!=e["left side"]?e["left side"]:0,"right side":null!=e["right side"]?e["right side"]:0}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return o(e,t),e.prototype.update=function(t){if(this.get("is initalize")&&!this.get("is destroyed")){var e=this.get("condition"),i=this.get("right side"),r=this.get("left side");1==this.get("play")&&("equal to"==e?r==i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false"):"greater than"==e?"number"==typeof r&&"number"==typeof i&&(r>i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"greater than or equal to"==e?"number"==typeof r&&"number"==typeof i&&(r>=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"less than"==e?"number"==typeof r&&"number"==typeof i&&(r<i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"less than or equal to"==e?"number"==typeof r&&"number"==typeof i&&(r<=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"not"==e&&(r!=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")),this.set("play",!1)),this.eventEmitter.emit("update",t),this.Updater.update(t)}},e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=r,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=n},322:function(t,e,i){var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(i(670)),l=i(950),h=n(i(305)),p=a(i(986)),u=a(i(437)),c=function(){function t(t){this.Render=new h.Render,this.Storage=new h.Storage(this),this.displaySize={x:40,y:50},this.propertyManager=new s.default,this.set=this.propertyManager.set.bind(this.propertyManager),this.get=this.propertyManager.get.bind(this.propertyManager),this.add=this.Storage.add.bind(this.Storage),this.entry=this.propertyManager.entry.bind(this.propertyManager),this.child=this.Storage.child.bind(this.Storage),this.eventEmitter=new u.default(this),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.store=new p.default(this),this.has=this.Storage.has.bind(this.Storage),this._type="Container",this.propertyManager.scheme({name:t.name,"is destroyed":{value:!1,readonly:!0,type:"boolean"},"is initalize":{value:!1,readonly:!0,type:"boolean"},path:String(),opacity:null!=t.opacity?t.opacity:1,position:null!=t.position?t.position:new l.Vector2(0,0),scale:null!=t.scale?t.scale:new l.Vector2(1,1),rotation:null!=t.rotation?t.rotation:0,visible:null==t.visible||t.visible,"z index":null!=t["z index"]?t["z index"]:1})}return Object.defineProperty(t.prototype,"tree",{get:function(){return this.Storage.characterTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!1,configurable:!0}),t.prototype.initalize=function(t,e,i){this.get("is initalize")||(this._parent=i,this._game=e,this.canvas=t,this.propertyManager.override("is initalize",!0),this.Updater=new h.Updater(this.canvas,this._game,this,this.Storage,this.Render),this.eventEmitter.emit("init"))},t.prototype.destroy=function(){this.propertyManager.override("is destroyed",!0)},t.prototype.update=function(t){this.get("is initalize")&&!this.get("is destroyed")&&(this.eventEmitter.emit("update",t),this.Updater.update(t))},t.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=r+this.get("rotation"),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},t}();e.default=c},417:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i.currentIndex=0,i._type="Image",i.propertyManager.scheme({source:null!=e.source?{type:"Array<string>",readonly:!1,value:e.source}:{type:"Array<string>",readonly:!1,value:Array()},rate:null!=e.rate?e.rate:1,height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0)}),i}return o(e,t),e.prototype.update=function(t){if(this.get("is initalize")&&!this.get("is destroyed")){if(1==this.get("source").length)this.currentIndex=0;else if(this.get("source").length>1){this.currentTime+=t;var e=this.get("rate");this.currentTime>=e&&(this.currentIndex+=1,this.currentTime=0,this.currentIndex=this.currentIndex>this.get("source").length-1?0:this.currentIndex)}this.Updater.update(t)}},e.prototype.render=function(t,e,i,r){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=r+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y;var o=this.get("source")[this.currentIndex];if(null!=o){var n=this.game.asset(o);null!=n&&"image"==n.type&&t.drawImage(n.data,this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height"))}t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(n.Container);e.default=l},295:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var r,o=0,n=e.length;o<n;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Loop",i.propertyManager.scheme({time:null!=e.time?e.time:0,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return o(e,t),e.prototype.update=function(t){var e=this;this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(n([],Array.from(Array(this.get("time")).keys()),!0).forEach((function(t){t+=1,e.eventEmitter.emit("each",t),t==e.get("time")&&e.eventEmitter.emit("end",t)})),this.set("play",!1)),this.eventEmitter.emit("update",t),this.Updater.update(t))},e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=r,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=a},759:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.audio=null,i._type="Sound",i.propertyManager.scheme({source:null!=e.source?e.source:String(),repeat:null!=e.repeat&&e.repeat,rate:null!=e.rate?e.rate:1,volume:null!=e.volume?e.volume:100,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return o(e,t),e.prototype.update=function(t){var e=this;if(this.get("is initalize")&&!this.get("is destroyed")){if(null==this.audio){var i=this.get("source"),r=this.game.asset(i);null!=r&&"audio"==r.type&&(this.audio=r.data.cloneNode(!0))}else this.audio.volume=this.get("volume")/100,this.audio.loop=this.get("repeat"),this.audio.playbackRate=this.get("rate"),this.audio.onended=function(){var t;e.get("repeat")||(e.set("play",!1),null===(t=e.audio)||void 0===t||t.pause(),e.eventEmitter.emit("finished"))};null!=this.audio&&(1==this.get("play")?this.audio.paused&&this.audio.play():0==this.get("play")&&this.audio.pause()),this.eventEmitter.emit("update",t),this.Updater.update(t)}},e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=r,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=n},17:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(518),a=i(86),s=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Text",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new s.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new s.Color(0,0,0,1),"shadow color":null!=e["shadow color"]?e["shadow color"]:new s.Color(0,0,0,0),"font size":null!=e["font size"]?e["font size"]:16,"font style":null!=e["font style"]?e["font style"]:"normal","font variant":null!=e["font variant"]?e["font variant"]:"normal","font weight":null!=e["font weight"]?e["font weight"]:"normal","font family":null!=e["font family"]?e["font family"]:"sans-serif","text align":null!=e["text align"]?e["text align"]:"center","text baseline":null!=e["text baseline"]?e["text baseline"]:"middle",text:null!=e.text?e.text:"Hello, world!"}),i}return o(e,t),e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=r+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof a.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.font=this.get("font style")+" "+this.get("font variant")+" "+this.get("font weight")+" "+this.get("font size")+"px "+this.get("font family"),t.textAlign=this.get("text align"),t.textBaseline=this.get("text baseline"),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.fillText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y)):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.strokeText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y)),t.restore(),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(n.Container);e.default=l},456:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i._type="Timer",i.propertyManager.scheme({"wait time":null!=e["wait time"]?e["wait time"]:1,play:null!=e.play&&e.play,repeat:null!=e.repeat&&e.repeat}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return o(e,t),e.prototype.update=function(t){var e=this.get("wait time"),i=this.get("repeat");this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(this.currentTime+=t,this.currentTime>=e&&(this.currentTime=0,this.eventEmitter.emit("timeout"),i||this.set("play",!1))),this.eventEmitter.emit("update",t),this.Updater.update(t))},e.prototype.render=function(t,e,i,r){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=r,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=n},518:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.Image=e.Condition=e.Timer=e.Loop=e.Box=e.Text=e.Arc=e.Container=void 0;var o=r(i(322));e.Container=o.default;var n=r(i(618));e.Arc=n.default;var a=r(i(17));e.Text=a.default;var s=r(i(717));e.Box=s.default;var l=r(i(295));e.Loop=l.default;var h=r(i(762));e.Condition=h.default;var p=r(i(456));e.Timer=p.default;var u=r(i(417));e.Image=u.default;var c=r(i(759));e.Sound=c.default},86:function(t,e,i){var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var s=a(i(960));e.Game=s.default;var l=n(i(518));e.Character=l;var h=n(i(950));e.Math=h},515:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),this.red=t,this.blue=i,this.green=e,this.alpha=r}return t.prototype.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},t.prototype.toArray=function(){return[this.red,this.green,this.blue,this.alpha]},t.prototype.fromArray=function(e){return new t(null!=e[0]?e[0]:0,null!=e[1]?e[1]:0,null!=e[2]?e[2]:0,null!=e[3]?e[3]:1)},t.prototype.toObject=function(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}},t.prototype.fromObject=function(e){return new t(e.red,e.green,e.blue,e.alpha)},t}();e.default=i},893:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this._x=null!=t?t:0,this._y=null!=e?e:0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this._y=t},enumerable:!1,configurable:!0}),t.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=this;if(1==e.length){var o=e[0];r=new t(r.x+o.x,r.y+o.y)}else e.length>1&&e.forEach((function(t){r=r.add(t)}));return r},t.prototype.substr=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=this;if(1==e.length){var o=e[0];r=new t(r.x-o.x,r.y-o.y)}else e.length>1&&e.forEach((function(t){r=r.substr(t)}));return r},t.prototype.dot=function(t){return this._x*t.x+this._y*t.y},t.prototype.divide=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=this;if(1==e.length){var o=e[0];r=new t(r.x/o.x,r.y/o.y)}else e.length>1&&e.forEach((function(t){r=r.divide(t)}));return r},t.prototype.multiply=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=this;if(1==e.length){var o=e[0];r="number"==typeof o?new t(r.x*o,r.y*o):new t(r.x*o.x,r.y*o.y)}else e.length>1&&e.forEach((function(t){r=r.multiply(t)}));return r},t.prototype.toArray=function(){return[this._x,this._y]},t.prototype.toString=function(){return"("+this._x+", "+this._y+")"},t.prototype.toObject=function(){return{x:this._x,y:this._y}},t.prototype.angle=function(){return Math.tan(this._y/this._x)},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(Math.abs(this._x),2)+Math.pow(Math.abs(this._y),2))},t.prototype.normalize=function(){var e=this.magnitude(),i=new t(0,0);return e>1e-5&&(i.setX=this.x/e,i.setY=this.y/e),i},t}();e.default=i},65:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=void 0;var i=Math.PI,r=Math.E,o=Math.SQRT1_2,n=Math.SQRT2,a=Math.LN10,s=Math.LN2,l=Math.LOG10E,h=Math.LOG2E;e.PI=i,e.E=r,e.SQRT1_2=o,e.SQRT2=n,e.LN10=a,e.LN2=s,e.LOG10E=l,e.LOG2E=h,Math.floor},549:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.random=e.ceil=e.expm1=e.exp=e.abs=void 0;var r=i(950);e.abs=function(t){return"number"==typeof t?Math.abs(t):new r.Vector2(Math.abs(t.x),Math.abs(t.y))},e.exp=function(t){return"number"==typeof t?Math.exp(t):new r.Vector2(Math.exp(t.x),Math.exp(t.y))},e.expm1=function(t){return"number"==typeof t?Math.expm1(t):new r.Vector2(Math.expm1(t.x),Math.expm1(t.y))},e.ceil=function(t){return"number"==typeof t?Math.ceil(t):new r.Vector2(Math.ceil(t.x),Math.ceil(t.y))},e.random=function(t,e){return t+Math.random()*(e-t)}},950:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ceil=e.abs=e.random=e.expm1=e.exp=e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=e.Color=e.Vector2=void 0;var o=r(i(515));e.Color=o.default;var n=i(65);Object.defineProperty(e,"PI",{enumerable:!0,get:function(){return n.PI}}),Object.defineProperty(e,"E",{enumerable:!0,get:function(){return n.E}}),Object.defineProperty(e,"SQRT1_2",{enumerable:!0,get:function(){return n.SQRT1_2}}),Object.defineProperty(e,"SQRT2",{enumerable:!0,get:function(){return n.SQRT2}}),Object.defineProperty(e,"LOG2E",{enumerable:!0,get:function(){return n.LOG2E}}),Object.defineProperty(e,"LN10",{enumerable:!0,get:function(){return n.LN10}}),Object.defineProperty(e,"LN2",{enumerable:!0,get:function(){return n.LN2}}),Object.defineProperty(e,"LOG10E",{enumerable:!0,get:function(){return n.LOG10E}});var a=i(549);Object.defineProperty(e,"exp",{enumerable:!0,get:function(){return a.exp}}),Object.defineProperty(e,"expm1",{enumerable:!0,get:function(){return a.expm1}}),Object.defineProperty(e,"random",{enumerable:!0,get:function(){return a.random}}),Object.defineProperty(e,"abs",{enumerable:!0,get:function(){return a.abs}}),Object.defineProperty(e,"ceil",{enumerable:!0,get:function(){return a.ceil}});var s=r(i(893));e.Vector2=s.default},226:function(t,e){var i=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,r,o,n,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=e.call(t,a)}catch(t){n=[6,t],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.assetsToLoad=Array(),this.assetsLoaded=new Map,this.supportedImageFormat=new Set(["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"]),this.supportedAudioFormat=new Set(["wav","mp3","mp4a","mpga","mp2","mp2a","m2a","m3a","oga","ogg","spx","opus","aac","weba","caf","flac"]),this.supportedFontFormat=new Set(["ttf","woff","otf","woff2"])}return t.prototype.load=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){var i=e.split(".").pop();null!=i?(i=i.toLowerCase(),t.supportedImageFormat.has(i)?t.assetsToLoad.push({type:"image",path:e}):t.supportedAudioFormat.has(i)?t.assetsToLoad.push({type:"audio",path:e}):t.supportedFontFormat.has(i)?t.assetsToLoad.push({type:"font",path:e}):console.error("Asset format is not supported")):console.error("Asset need to have an extension name")}))},t.prototype.loadAudio=function(t){var e=this;if("audio"==t.type){var i=new Audio(t.path);i.onloadeddata=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"audio",data:i})},i.onerror=function(){console.error("Failed to load audio asset from '"+t.path+"'")}}},t.prototype.loadImage=function(t){var e=this;if("image"==t.type){var i=new Image;i.src=t.path,i.onload=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"image",data:i})},i.onerror=function(){console.error("Failed to load image asset from '"+t.path+"'")}}},t.prototype.loadFont=function(t){var e=this,i=Object(window).FontFace,r=t.path.split("/").pop().replace(/\..+/,"");new i(r,"url("+t.path+")").load().then((function(i){Object(document).fonts.add(i),e.assetsLoaded.set(r,{type:"font",data:t.path})})).catch((function(){console.error("Failed to load font asset from '"+t.path+"'")}))},t.prototype.delete=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){t.assetsLoaded.delete(e)}))},t.prototype.check=function(t){return this.assetsLoaded.has(t)},t.prototype.asset=function(t){return this.assetsLoaded.has(t)?this.assetsLoaded.get(t):null},t.prototype.isAssetsLoaded=function(){return i(this,void 0,void 0,(function(){var t=this;return r(this,(function(e){return this.assetsToLoad.forEach((function(e){"image"==e.type?t.loadImage(e):"audio"==e.type?t.loadAudio(e):"font"==e.type&&t.loadFont(e)})),this.assetsToLoad.length=0,[2]}))}))},t}();e.default=o},940:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(950),o=function(){function t(t){this._offset=new r.Vector2(0,0),this.game=t}return Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),t}();e.default=o},986:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.dataMap=new Map,this.keyMap=new Map,this.character=t}return t.prototype.rename=function(t,e){var i=this.keyMap.get(t);if(null!=i){var r=this.dataMap.get(i);this.keyMap.has(e)||(this.keyMap.delete(t),this.keyMap.set(e,i),this.dataMap.set(i,{type:r.type,key:e,value:r.value}))}},t.prototype.set=function(t,e){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e){var i=this.keyMap.get(t),r=typeof e;if(null!=i){var o=this.dataMap.get(i);this.dataMap.set(i,{type:r,key:o.key,value:e})}else{var n=this.dataMap.size+1;this.dataMap.set(n,{key:t,value:e,type:r}),this.keyMap.set(t,n)}}},t.prototype.has=function(t){return this.keyMap.has(t)},t.prototype.delete=function(t){var e=this.keyMap.get(t);return null!=e&&(this.keyMap.delete(t),this.dataMap.delete(e),!0)},t.prototype.get=function(t){var e=this.keyMap.get(t);return null!=e?this.dataMap.get(e):null},Object.defineProperty(t.prototype,"size",{get:function(){return this.dataMap.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){var e=this;this.dataMap.forEach((function(i){return t(i,i.key,e)}))},t.prototype.list=function(){return Array.from(this.dataMap.values())},t}();e.default=i},437:function(t,e){var i=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var r,o=0,n=e.length;o<n;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.eventMap=new Map,this.character=t}return t.prototype.on=function(t,e){this.eventMap.set(t,e)},t.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(this.eventMap.has(t)){var o=this.eventMap.get(t);return o.apply(null,i([this.character],e,!0)),!0}return!1},t}();e.default=r},774:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.keyMap=new Map,this.game=t}return t.prototype.register=function(t){this.keyMap.set(t,String())},t.prototype.unregister=function(t){this.keyMap.delete(t)},t.prototype.onKeyPress=function(t){var e=new Set(["Shift","Control","Alt"]),i=String();t.ctrlKey&&(i=i.concat("CTRL+".toUpperCase())),t.shiftKey&&(i=i.concat("SHIFT+".toUpperCase())),t.altKey&&(i=i.concat("ALT+".toUpperCase())),e.has(t.key)||(i=i.concat(t.key.toUpperCase())),this.keyMap.has(i)&&console.log(i)},t}();e.default=i},539:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardEventManager=void 0;var o=r(i(774));e.KeyboardEventManager=o.default},670:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(950),o=function(){function t(){this.propertyMap=new Map,this.readonlyPropertySet=new Set}return t.prototype.scheme=function(t){for(var e in t){var i=t[e];if("object"!=typeof i||i instanceof r.Vector2||i instanceof r.Color){var o="number"==typeof i?"number":"string"==typeof i?"string":"boolean"==typeof i?"boolean":Array.isArray(i)?"Array<string>":i instanceof r.Vector2?"Vector2":"Color";this.propertyMap.set(e,{value:i,readonly:!1,type:o})}else this.propertyMap.set(e,{value:i.value,type:i.type,readonly:i.readonly}),1==i.readonly&&this.readonlyPropertySet.add(e)}},t.prototype.get=function(t){return this.propertyMap.has(t)?this.propertyMap.get(t).value:null},t.prototype.set=function(t,e){this.propertyMap.has(t)&&!this.readonlyPropertySet.has(t)&&this.propertyMap.set(t,{value:e,readonly:this.propertyMap.get(t).readonly,type:this.propertyMap.get(t).type})},t.prototype.override=function(t,e){this.readonlyPropertySet.has(t)&&this.propertyMap.set(t,{value:e,readonly:this.propertyMap.get(t).readonly,type:this.propertyMap.get(t).type})},t.prototype.has=function(t){return this.propertyMap.has(t)},t.prototype.delete=function(t){this.propertyMap.delete(t)},t.prototype.entry=function(){return Array.from(this.propertyMap).filter((function(t){return!t[1].readonly})).map((function(t){return{name:t[0],value:t[1].value,type:t[1].type}}))},t}();e.default=o},328:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.renderMap=new Map,this.renderIndexArray=Array()}return t.prototype.add=function(t,e){this.renderMap.has(t)?(this.renderMap.get(t).push(e),this.renderIndexArray.includes(t)||this.renderIndexArray.push(t)):(this.renderIndexArray.push(t),this.renderMap.set(t,[e]))},t.prototype.render=function(t,e,i,r){var o=this;this.renderIndexArray.sort(),this.renderIndexArray.forEach((function(n){o.renderMap.has(n)&&o.renderMap.get(n).forEach((function(o){o.get("is destroyed")||o.render(t,e,i,r)}))})),this.renderIndexArray.length=0,this.renderMap.clear()},t}();e.default=i},82:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.storageMap=new Map,this.predefineCharacterList=Array(),this.character=t}return Object.defineProperty(t.prototype,"characterTree",{get:function(){return this._characterTree},set:function(t){this._characterTree=t},enumerable:!1,configurable:!0}),t.prototype.list=function(){return Array.from(this.storageMap.values())},t.prototype.listPredefineCharacter=function(){return this.predefineCharacterList},t.prototype.nativeAdd=function(t){this.storageMap.set(t.get("name"),t)},t.prototype.add=function(t){this.predefineCharacterList.push(t)},t.prototype.has=function(t){var e=!1,i=t.split("/"),r=this.character;return 1==i.length?e=this.storageMap.has(i[0]):i.length>1?i.forEach((function(t){null!=r&&r.has(t)?(r=r.child(t),e=!0):e=!1})):e=!1,e},t.prototype.clear=function(){this.storageMap.clear(),this.predefineCharacterList.length=0},t.prototype.child=function(t){var e=this,i=null,r=t.split("/");return 1==r.length?i=this.storageMap.has(r[0])?this.storageMap.get(r[0]):null:r.length>1?r.forEach((function(t){i=t!=String()?null==i?e.storageMap.has(t)?e.storageMap.get(t):null:i.has(t)?i.child(t):null:null})):i=null,i},t}();e.default=i},264:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(607),o=function(){function t(t,e,i,r,o){this.canvas=t,this.game=e,this.character=i,this.render=o,this.storage=r}return t.prototype.update=function(t){var e=this,i=this.storage.list(),o=this.storage.listPredefineCharacter();o.forEach((function(t){t.get("is initalize")||(t.initalize(e.canvas,e.game,e.character),i.push(t))})),o.length=0,this.storage.clear(),this.storage.characterTree={name:this.character.get("name"),type:this.character.type,path:this.character.get("path"),children:new Map},i.forEach((function(i){if(i.get("is destroyed"))i.emit("final");else{var o=String();o=e.character instanceof r.Game?o.concat(i.get("name")):o.concat(e.character.get("path")).concat("/").concat(i.get("name")),i.set("path",o),i.update(t),e.storage.nativeAdd(i),e.render.add(i.get("z index"),i),e.storage.characterTree.children.set(i.get("name"),i.tree)}}))},t}();e.default=o},305:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Render=e.Updater=e.Storage=void 0;var o=r(i(328));e.Render=o.default;var n=r(i(82));e.Storage=n.default;var a=r(i(264));e.Updater=a.default}},e={},i=function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}(607);KaroEngine=i})();