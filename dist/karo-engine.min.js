var KaroEngine;(()=>{"use strict";var t={607:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var n=i(86);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return n.Game}}),Object.defineProperty(e,"Character",{enumerable:!0,get:function(){return n.Character}}),Object.defineProperty(e,"Math",{enumerable:!0,get:function(){return n.Math}})},960:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(i(305)),l=i(950),h=s(i(226)),p=i(539),u=i(362),c=s(i(940)),d=s(i(670)),f=s(i(986)),y=s(i(437)),g=function(){function t(t){var e=this;this.oldTime=0,this.assetsLoader=new h.default,this.Render=new a.Render,this.Storage=new a.Storage(this),this.camera=new c.default(this),this.propertyManager=new d.default,this.eventEmitter=new y.default(this),this.isReady=!1,this._isplaying=!0,this.on=this.eventEmitter.on.bind(this.eventEmitter),this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.set=this.propertyManager.set.bind(this.propertyManager),this.store=new f.default(this),this.get=this.propertyManager.get.bind(this.propertyManager),this.load=this.assetsLoader.load.bind(this.assetsLoader),this.delete=this.assetsLoader.delete.bind(this.assetsLoader),this.asset=this.assetsLoader.asset.bind(this.assetsLoader),this.check=this.assetsLoader.asset.bind(this.assetsLoader),this.add=this.Storage.add.bind(this.Storage),this.child=this.Storage.child.bind(this.Storage),this.has=this.Storage.has.bind(this.Storage),this.allProperties=this.propertyManager.allProperties.bind(this.propertyManager),this.keyboardEvent=new p.KeyboardEventManager(this),this.pointerEventDetector=new u.PointerEventDetector,this.register=this.keyboardEvent.register.bind(this.keyboardEvent),this.unregister=this.keyboardEvent.unregister.bind(this.keyboardEvent),this.propertyManager.scheme({"background color":null!=t["background color"]?t["background color"]:new l.Color(255,255,255,1),name:null!=t.name?t.name:"New Game",author:null!=t.author?t.author:"Quality Builder",description:null!=t.description?t.description:String(),version:null!=t.version?t.version:"1.0.0",icon:null!=t.icon?t.icon:String()}),this.canvas=t.canvas,this.graphic=this.canvas.getContext("2d"),this.Updater=new a.Updater(this.canvas,this,this,this.Storage,this.Render),this.pointerEvent=new p.PointerEventManager(this.canvas,this,(function(t){return e.pointerEventDetector.inputEvent=t}))}return Object.defineProperty(t.prototype,"isplaying",{get:function(){return this._isplaying},set:function(t){this._isplaying=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return this.Storage.characterTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return"Game"},enumerable:!1,configurable:!0}),t.prototype.play=function(){this.isplaying=!0},t.prototype.stop=function(){this.isplaying=!1},t.prototype.sharpenCanvas=function(t){var e=window.devicePixelRatio||1,i=t.getBoundingClientRect();t.width=i.width*e,t.height=i.height*e;var n=t.getContext("2d");return n.constructor.prototype.isTextInPath=function(t,e,i){var n=this;return n.beginPath(),n.rect(t.x,t.y,t.w,t.h),n.isPointInPath(e,i)},n.scale(e,e),n},t.prototype.draw=function(t){var e=this;if(this.isplaying){var i=(t-this.oldTime)/1e3;this.oldTime=t,this.graphic=this.sharpenCanvas(this.canvas),this.canvas.style.backgroundColor=this.get("background color").toString(),this.assetsLoader.isAssetsLoaded().then((function(){e.isReady||(e.eventEmitter.emit("ready"),e.isReady=!0),e.graphic.clearRect(0,0,e.canvas.width,e.canvas.height),e.eventEmitter.emit("update",i),e.Updater.update(i),e.Render.render(e.graphic,new l.Vector2(0,0),new l.Vector2(1,1),0),null!=e.pointerEventDetector.characterDetected&&null!=e.pointerEventDetector.inputEvent?e.pointerEventDetector.characterDetected.emit("input",e.pointerEventDetector.inputEvent):null!=e.pointerEventDetector.inputEvent&&e.emit("input",e.pointerEventDetector.inputEvent),e.pointerEventDetector.characterDetected=null,e.pointerEventDetector.inputEvent=null}))}},t.prototype.onKeyPress=function(t){this.keyboardEvent.onKeyPress(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.camera.offset},set:function(t){this.camera.offset=t},enumerable:!1,configurable:!0}),t}();e.default=g},618:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(518),s=i(86),a=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Arc",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new a.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,anticlockwise:null!=e.anticlockwise&&e.anticlockwise,color:null!=e.color?e.color:new a.Color(0,0,0,1),radius:null!=e.radius?e.radius:10,"shadow color":null!=e["shadow color"]?e["shadow color"]:new a.Color(0,0,0,0),"start angle":null!=e["start angle"]?e["start angle"]:0,"end angle":null!=e["end angle"]?e["end angle"]:360}),i}return r(e,t),e.prototype.render=function(t,e,i,n){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=n+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("shadow color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.beginPath(),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.fill()):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.arc(this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y,this.get("radius"),this.get("start angle"),this.get("end angle"),this.get("anticlockwise")),t.stroke()),t.restore();var r=this.game.pointerEventDetector.inputEvent;if(null!=r){var o=!!t.isPointInPath(r.position.x,r.position.y)||!!t.isPointInStroke(r.position.x,r.position.y),a=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),l=this.get("color");o&&a>0&&l.alpha>0&&(this.game.pointerEventDetector.characterDetected=this)}this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(o.Container);e.default=l},717:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(518),s=i(86),a=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Box",i.propertyManager.scheme({height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new a.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new a.Color(0,0,0,1),"shadow color":null!=e["shadow color"]?e["shadow color"]:new a.Color(0,0,0,0)}),i}return r(e,t),e.prototype.render=function(t,e,i,n){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=n+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("shadow color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.lineWidth=this.get("line width"),t.beginPath(),1==this.get("fill")?t.fillStyle=this.get("color").toString():0==this.get("fill")&&(t.strokeStyle=this.get("color").toString()),t.rect(this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height")),1==this.get("fill")?t.fill():0==this.get("fill")&&t.stroke(),t.restore();var r=this.game.pointerEventDetector.inputEvent;if(null!=r){var o=!!t.isPointInPath(r.position.x,r.position.y)||!!t.isPointInStroke(r.position.x,r.position.y),a=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),l=this.get("color");o&&a>0&&l.alpha>0&&(this.game.pointerEventDetector.characterDetected=this)}this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(o.Container);e.default=l},762:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Condition",i.propertyManager.scheme({play:null!=e.play&&e.play,condition:null!=e.condition?e.condition:"equal to","left side":null!=e["left side"]?e["left side"]:0,"right side":null!=e["right side"]?e["right side"]:0}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return r(e,t),e.prototype.update=function(t){if(this.get("is initalize")&&!this.get("is destroyed")){var e=this.get("condition"),i=this.get("right side"),n=this.get("left side");1==this.get("play")&&("equal to"==e?n==i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false"):"greater than"==e?"number"==typeof n&&"number"==typeof i&&(n>i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"greater than or equal to"==e?"number"==typeof n&&"number"==typeof i&&(n>=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"less than"==e?"number"==typeof n&&"number"==typeof i&&(n<i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"less than or equal to"==e?"number"==typeof n&&"number"==typeof i&&(n<=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")):"not"==e&&(n!=i?this.eventEmitter.emit("is true"):this.eventEmitter.emit("is false")),this.set("play",!1)),this.eventEmitter.emit("update",t),this.Updater.update(t)}},e.prototype.render=function(t,e,i,n){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=n,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=o},322:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(i(670)),l=i(950),h=o(i(305)),p=s(i(986)),u=s(i(437)),c=function(){function t(t){this.Render=new h.Render,this.Storage=new h.Storage(this),this.propertyManager=new a.default,this.set=this.propertyManager.set.bind(this.propertyManager),this.get=this.propertyManager.get.bind(this.propertyManager),this.add=this.Storage.add.bind(this.Storage),this.allProperties=this.propertyManager.allProperties.bind(this.propertyManager),this.child=this.Storage.child.bind(this.Storage),this.eventEmitter=new u.default(this),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.store=new p.default(this),this.has=this.Storage.has.bind(this.Storage),this._type="Container",this.propertyManager.scheme({name:t.name,"is destroyed":{value:!1,readonly:!0,type:"boolean"},"is initalize":{value:!1,readonly:!0,type:"boolean"},path:String(),opacity:null!=t.opacity?t.opacity:1,position:null!=t.position?t.position:new l.Vector2(0,0),scale:null!=t.scale?t.scale:new l.Vector2(1,1),rotation:null!=t.rotation?t.rotation:0,visible:null==t.visible||t.visible,"z index":null!=t["z index"]?t["z index"]:1})}return Object.defineProperty(t.prototype,"tree",{get:function(){return this.Storage.characterTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!1,configurable:!0}),t.prototype.initalize=function(t,e,i){this.get("is initalize")||(this._parent=i,this._game=e,this.canvas=t,this.propertyManager.override("is initalize",!0),this.Updater=new h.Updater(this.canvas,this._game,this,this.Storage,this.Render),this.eventEmitter.emit("init"))},t.prototype.destroy=function(){this.propertyManager.override("is destroyed",!0)},t.prototype.update=function(t){this.get("is initalize")&&!this.get("is destroyed")&&(this.eventEmitter.emit("update",t),this.Updater.update(t))},t.prototype.render=function(t,e,i,n){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=n+this.get("rotation"),this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},t}();e.default=c},417:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(518),s=i(86),a=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i.currentIndex=0,i._type="Image",i.propertyManager.scheme({source:null!=e.source?{type:"Array<string>",readonly:!1,value:e.source}:{type:"Array<string>",readonly:!1,value:Array()},rate:null!=e.rate?e.rate:1,height:null!=e.height?e.height:40,width:null!=e.width?e.width:40,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new a.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,"shadow color":null!=e["shadow color"]?e["shadow color"]:new a.Color(0,0,0,0)}),i}return r(e,t),e.prototype.update=function(t){if(this.get("is initalize")&&!this.get("is destroyed")){if(1==this.get("source").length)this.currentIndex=0;else if(this.get("source").length>1){this.currentTime+=t;var e=this.get("rate");this.currentTime>=e&&(this.currentIndex+=1,this.currentTime=0,this.currentIndex=this.currentIndex>this.get("source").length-1?0:this.currentIndex)}this.Updater.update(t)}},e.prototype.render=function(t,e,i,n){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=n+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y;var r=this.get("source")[this.currentIndex];if(null!=r){var o=this.game.asset(r);null!=o&&"image"==o.type&&t.drawImage(o.data,this.displayPosition.x-this.get("width")/2-this.game.offset.x,this.displayPosition.y-this.get("height")/2-this.game.offset.y,this.get("width"),this.get("height"))}t.restore();var a=this.game.pointerEventDetector.inputEvent;if(null!=a){var l=!!t.isPointInPath(a.position.x,a.position.y)||!!t.isPointInStroke(a.position.x,a.position.y),h=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),p=this.get("color");l&&h>0&&p.alpha>0&&(this.game.pointerEventDetector.characterDetected=this)}this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(o.Container);e.default=l},295:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Loop",i.propertyManager.scheme({time:null!=e.time?e.time:0,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return r(e,t),e.prototype.update=function(t){var e=this;this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(o([],Array.from(Array(this.get("time")).keys()),!0).forEach((function(t){t+=1,e.eventEmitter.emit("each",t),t==e.get("time")&&e.eventEmitter.emit("end",t)})),this.set("play",!1)),this.eventEmitter.emit("update",t),this.Updater.update(t))},e.prototype.render=function(t,e,i,n){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=n,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=s},759:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.audio=null,i._type="Sound",i.propertyManager.scheme({source:null!=e.source?e.source:String(),repeat:null!=e.repeat&&e.repeat,rate:null!=e.rate?e.rate:1,volume:null!=e.volume?e.volume:100,play:null!=e.play&&e.play}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return r(e,t),e.prototype.update=function(t){var e=this;if(this.get("is initalize")&&!this.get("is destroyed")){if(null==this.audio){var i=this.get("source"),n=this.game.asset(i);null!=n&&"audio"==n.type&&(this.audio=n.data.cloneNode(!0))}else this.audio.volume=this.get("volume")/100,this.audio.loop=this.get("repeat"),this.audio.playbackRate=this.get("rate"),this.audio.onended=function(){var t;e.get("repeat")||(e.set("play",!1),null===(t=e.audio)||void 0===t||t.pause(),e.eventEmitter.emit("finished"))};null!=this.audio&&(1==this.get("play")?this.audio.paused&&this.audio.play():0==this.get("play")&&this.audio.pause()),this.eventEmitter.emit("update",t),this.Updater.update(t)}},e.prototype.render=function(t,e,i,n){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=n,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=o},17:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(518),s=i(86),a=i(950),l=function(t){function e(e){var i=t.call(this,{name:e.name,position:e.position,scale:e.scale,rotation:e.rotation,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i._type="Text",i.propertyManager.scheme({fill:null==e.fill||e.fill,"shadow offset":null!=e["shadow offset"]?e["shadow offset"]:new a.Vector2(0,0),"shadow blur":null!=e["shadow blur"]?e["shadow blur"]:0,"line width":null!=e["line width"]?e["line width"]:1,color:null!=e.color?e.color:new a.Color(0,0,0,1),"shadow color":null!=e["shadow color"]?e["shadow color"]:new a.Color(0,0,0,0),"font size":null!=e["font size"]?e["font size"]:16,"font style":null!=e["font style"]?e["font style"]:"normal","font variant":null!=e["font variant"]?e["font variant"]:"normal","font weight":null!=e["font weight"]?e["font weight"]:"normal","font family":null!=e["font family"]?e["font family"]:"sans-serif","text align":null!=e["text align"]?e["text align"]:"center","text baseline":null!=e["text baseline"]?e["text baseline"]:"middle",text:null!=e.text?e.text:"Hello, world!"}),i}return r(e,t),e.prototype.render=function(t,e,i,n){if(this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")){this.displayPosition=e.add(this.get("position")),this.displayScale=i.multiply(this.get("scale")),this.displayRotation=n+this.get("rotation"),t.save(),t.translate(this.displayPosition.x,this.displayPosition.y),t.rotate(this.displayRotation*Math.PI/180),t.scale(this.displayScale.x,this.displayScale.y),t.translate(-this.displayPosition.x,-this.displayPosition.y),t.globalAlpha=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),t.shadowBlur=this.get("shadow blur"),t.shadowColor=this.get("shadow color").toString(),t.shadowOffsetX=this.get("shadow offset").x,t.shadowOffsetY=this.get("shadow offset").y,t.font=this.get("font style")+" "+this.get("font variant")+" "+this.get("font weight")+" "+this.get("font size")+"px "+this.get("font family"),t.textAlign=this.get("text align"),t.textBaseline=this.get("text baseline"),1==this.get("fill")?(t.fillStyle=this.get("color").toString(),t.fillText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y)):0==this.get("fill")&&(t.lineWidth=this.get("line width"),t.strokeStyle=this.get("color").toString(),t.strokeText(this.get("text"),this.displayPosition.x-this.game.offset.x,this.displayPosition.y-this.game.offset.y));var r=t.measureText(this.get("text")).width,o=this.displayPosition.x-this.game.offset.x-.5*r,a=this.displayPosition.x-this.game.offset.x-this.get("font size")/2;"center"==t.textAlign?o=this.displayPosition.x-this.game.offset.x-.5*r:"end"==t.textAlign||"right"==t.textAlign?o=this.displayPosition.x-this.game.offset.x-r:"start"!=t.textAlign&&"left"!=t.textAlign||(o=this.displayPosition.x-this.game.offset.x),"middle"==t.textBaseline?a=this.displayPosition.x-this.game.offset.x-this.get("font size")/2:"top"==t.textBaseline||"hanging"==t.textBaseline?a=this.displayPosition.x-this.game.offset.x:"bottom"!=t.textBaseline&&"alphabetic"!=t.textBaseline&&"ideographic"!=t.textBaseline||(a=this.displayPosition.x-this.game.offset.x-this.get("font size"));var l={x:o,y:a,w:r,h:this.get("font size")};t.restore();var h=this.game.pointerEventDetector.inputEvent;if(null!=h){var p=Object(t).isTextInPath(l,h.position.x,h.position.y),u=this.parent instanceof s.Game?this.get("opacity"):this.parent.get("opacity")*this.get("opacity"),c=this.get("color");p&&u>0&&c.alpha>0&&(this.game.pointerEventDetector.characterDetected=this)}this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation)}},e}(o.Container);e.default=l},456:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var i=t.call(this,{name:e.name,"z index":e["z index"],opacity:e.opacity,visible:e.visible})||this;return i.currentTime=0,i._type="Timer",i.propertyManager.scheme({"wait time":null!=e["wait time"]?e["wait time"]:1,play:null!=e.play&&e.play,repeat:null!=e.repeat&&e.repeat}),i.propertyManager.delete("position"),i.propertyManager.delete("rotation"),i.propertyManager.delete("scale"),i}return r(e,t),e.prototype.update=function(t){var e=this.get("wait time"),i=this.get("repeat");this.get("is initalize")&&!this.get("is destroyed")&&(1==this.get("play")&&(this.currentTime+=t,this.currentTime>=e&&(this.currentTime=0,this.eventEmitter.emit("timeout"),i||this.set("play",!1))),this.eventEmitter.emit("update",t),this.Updater.update(t))},e.prototype.render=function(t,e,i,n){this.get("is initalize")&&!this.get("is destroyed")&&this.get("visible")&&(this.displayPosition=e,this.displayScale=i,this.displayRotation=n,this.Render.render(t,this.displayPosition,this.displayScale,this.displayRotation))},e}(i(518).Container);e.default=o},518:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.Image=e.Condition=e.Timer=e.Loop=e.Box=e.Text=e.Arc=e.Container=void 0;var r=n(i(322));e.Container=r.default;var o=n(i(618));e.Arc=o.default;var s=n(i(17));e.Text=s.default;var a=n(i(717));e.Box=a.default;var l=n(i(295));e.Loop=l.default;var h=n(i(762));e.Condition=h.default;var p=n(i(456));e.Timer=p.default;var u=n(i(417));e.Image=u.default;var c=n(i(759));e.Sound=c.default},86:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Math=e.Character=e.Game=void 0;var a=s(i(960));e.Game=a.default;var l=o(i(518));e.Character=l;var h=o(i(950));e.Math=h},515:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.red=t,this.blue=i,this.green=e,this.alpha=n}return t.prototype.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},t.prototype.toArray=function(){return[this.red,this.green,this.blue,this.alpha]},t.prototype.fromArray=function(e){return new t(null!=e[0]?e[0]:0,null!=e[1]?e[1]:0,null!=e[2]?e[2]:0,null!=e[3]?e[3]:1)},t.prototype.toObject=function(){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}},t.prototype.fromObject=function(e){return new t(e.red,e.green,e.blue,e.alpha)},t}();e.default=i},893:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this._x=null!=t?t:0,this._y=null!=e?e:0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setX",{set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setY",{set:function(t){this._y=t},enumerable:!1,configurable:!0}),t.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this;if(1==e.length){var r=e[0];n=new t(n.x+r.x,n.y+r.y)}else e.length>1&&e.forEach((function(t){n=n.add(t)}));return n},t.prototype.substr=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this;if(1==e.length){var r=e[0];n=new t(n.x-r.x,n.y-r.y)}else e.length>1&&e.forEach((function(t){n=n.substr(t)}));return n},t.prototype.dot=function(t){return this._x*t.x+this._y*t.y},t.prototype.divide=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this;if(1==e.length){var r=e[0];n=new t(n.x/r.x,n.y/r.y)}else e.length>1&&e.forEach((function(t){n=n.divide(t)}));return n},t.prototype.multiply=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this;if(1==e.length){var r=e[0];n="number"==typeof r?new t(n.x*r,n.y*r):new t(n.x*r.x,n.y*r.y)}else e.length>1&&e.forEach((function(t){n=n.multiply(t)}));return n},t.prototype.toArray=function(){return[this._x,this._y]},t.prototype.toString=function(){return"("+this._x+", "+this._y+")"},t.prototype.toObject=function(){return{x:this._x,y:this._y}},t.prototype.angle=function(){return Math.tan(this._y/this._x)},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(Math.abs(this._x),2)+Math.pow(Math.abs(this._y),2))},t.prototype.normalize=function(){var e=this.magnitude(),i=new t(0,0);return e>1e-5&&(i.setX=this.x/e,i.setY=this.y/e),i},t}();e.default=i},65:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=void 0;var i=Math.PI,n=Math.E,r=Math.SQRT1_2,o=Math.SQRT2,s=Math.LN10,a=Math.LN2,l=Math.LOG10E,h=Math.LOG2E;e.PI=i,e.E=n,e.SQRT1_2=r,e.SQRT2=o,e.LN10=s,e.LN2=a,e.LOG10E=l,e.LOG2E=h,Math.floor},549:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.random=e.ceil=e.expm1=e.exp=e.abs=void 0;var n=i(950);e.abs=function(t){return"number"==typeof t?Math.abs(t):new n.Vector2(Math.abs(t.x),Math.abs(t.y))},e.exp=function(t){return"number"==typeof t?Math.exp(t):new n.Vector2(Math.exp(t.x),Math.exp(t.y))},e.expm1=function(t){return"number"==typeof t?Math.expm1(t):new n.Vector2(Math.expm1(t.x),Math.expm1(t.y))},e.ceil=function(t){return"number"==typeof t?Math.ceil(t):new n.Vector2(Math.ceil(t.x),Math.ceil(t.y))},e.random=function(t,e){return t+Math.random()*(e-t)}},950:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ceil=e.abs=e.random=e.expm1=e.exp=e.LOG10E=e.LN2=e.LN10=e.LOG2E=e.SQRT2=e.SQRT1_2=e.E=e.PI=e.Color=e.Vector2=void 0;var r=n(i(515));e.Color=r.default;var o=i(65);Object.defineProperty(e,"PI",{enumerable:!0,get:function(){return o.PI}}),Object.defineProperty(e,"E",{enumerable:!0,get:function(){return o.E}}),Object.defineProperty(e,"SQRT1_2",{enumerable:!0,get:function(){return o.SQRT1_2}}),Object.defineProperty(e,"SQRT2",{enumerable:!0,get:function(){return o.SQRT2}}),Object.defineProperty(e,"LOG2E",{enumerable:!0,get:function(){return o.LOG2E}}),Object.defineProperty(e,"LN10",{enumerable:!0,get:function(){return o.LN10}}),Object.defineProperty(e,"LN2",{enumerable:!0,get:function(){return o.LN2}}),Object.defineProperty(e,"LOG10E",{enumerable:!0,get:function(){return o.LOG10E}});var s=i(549);Object.defineProperty(e,"exp",{enumerable:!0,get:function(){return s.exp}}),Object.defineProperty(e,"expm1",{enumerable:!0,get:function(){return s.expm1}}),Object.defineProperty(e,"random",{enumerable:!0,get:function(){return s.random}}),Object.defineProperty(e,"abs",{enumerable:!0,get:function(){return s.abs}}),Object.defineProperty(e,"ceil",{enumerable:!0,get:function(){return s.ceil}});var a=n(i(893));e.Vector2=a.default},226:function(t,e){var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.assetsToLoad=Array(),this.assetsLoaded=new Map,this.supportedImageFormat=new Set(["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"]),this.supportedAudioFormat=new Set(["wav","mp3","mp4a","mpga","mp2","mp2a","m2a","m3a","oga","ogg","spx","opus","aac","weba","caf","flac"]),this.supportedFontFormat=new Set(["ttf","woff","otf","woff2"])}return t.prototype.load=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){var i=e.split(".").pop();null!=i?(i=i.toLowerCase(),t.supportedImageFormat.has(i)?t.assetsToLoad.push({type:"image",path:e}):t.supportedAudioFormat.has(i)?t.assetsToLoad.push({type:"audio",path:e}):t.supportedFontFormat.has(i)?t.assetsToLoad.push({type:"font",path:e}):console.error("Asset format is not supported")):console.error("Asset need to have an extension name")}))},t.prototype.loadAudio=function(t){var e=this;if("audio"==t.type){var i=new Audio(t.path);i.onloadeddata=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"audio",data:i})},i.onerror=function(){console.error("Failed to load audio asset from '"+t.path+"'")}}},t.prototype.loadImage=function(t){var e=this;if("image"==t.type){var i=new Image;i.src=t.path,i.onload=function(){e.assetsLoaded.set(i.src.replace(i.baseURI,""),{type:"image",data:i})},i.onerror=function(){console.error("Failed to load image asset from '"+t.path+"'")}}},t.prototype.loadFont=function(t){var e=this,i=Object(window).FontFace,n=t.path.split("/").pop().replace(/\..+/,"");new i(n,"url("+t.path+")").load().then((function(i){Object(document).fonts.add(i),e.assetsLoaded.set(n,{type:"font",data:t.path})})).catch((function(){console.error("Failed to load font asset from '"+t.path+"'")}))},t.prototype.delete=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){t.assetsLoaded.delete(e)}))},t.prototype.check=function(t){return this.assetsLoaded.has(t)},t.prototype.asset=function(t){return this.assetsLoaded.has(t)?this.assetsLoaded.get(t):null},t.prototype.isAssetsLoaded=function(){return i(this,void 0,void 0,(function(){var t=this;return n(this,(function(e){return this.assetsToLoad.forEach((function(e){"image"==e.type?t.loadImage(e):"audio"==e.type?t.loadAudio(e):"font"==e.type&&t.loadFont(e)})),this.assetsToLoad.length=0,[2]}))}))},t}();e.default=r},940:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(950),r=function(){function t(t){this._offset=new n.Vector2(0,0),this.game=t}return Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),t}();e.default=r},986:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.dataMap=new Map,this.keyMap=new Map,this.character=t}return t.prototype.rename=function(t,e){var i=this.keyMap.get(t);if(null!=i){var n=this.dataMap.get(i);this.keyMap.has(e)||(this.keyMap.delete(t),this.keyMap.set(e,i),this.dataMap.set(i,{type:n.type,key:e,value:n.value}))}},t.prototype.set=function(t,e){if("boolean"==typeof e||"number"==typeof e||"string"==typeof e){var i=this.keyMap.get(t),n=typeof e;if(null!=i){var r=this.dataMap.get(i);this.dataMap.set(i,{type:n,key:r.key,value:e})}else{var o=this.dataMap.size+1;this.dataMap.set(o,{key:t,value:e,type:n}),this.keyMap.set(t,o)}}},t.prototype.has=function(t){return this.keyMap.has(t)},t.prototype.delete=function(t){var e=this.keyMap.get(t);return null!=e&&(this.keyMap.delete(t),this.dataMap.delete(e),!0)},t.prototype.get=function(t){var e=this.keyMap.get(t);return null!=e?this.dataMap.get(e):null},Object.defineProperty(t.prototype,"size",{get:function(){return this.dataMap.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){var e=this;this.dataMap.forEach((function(i){return t(i,i.key,e)}))},t.prototype.list=function(){return Array.from(this.dataMap.values())},t}();e.default=i},437:function(t,e){var i=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.eventMap=new Map,this.character=t}return t.prototype.on=function(t,e){this.eventMap.set(t,e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.eventMap.has(t)){var r=this.eventMap.get(t);return r.apply(null,i([this.character],e,!0)),!0}return!1},t}();e.default=n},774:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.keyMap=new Map,this.game=t}return t.prototype.register=function(t){this.keyMap.set(t,String())},t.prototype.unregister=function(t){this.keyMap.delete(t)},t.prototype.onKeyPress=function(t){var e=new Set(["Shift","Control","Alt"]),i=String();t.ctrlKey&&(i=i.concat("CTRL+".toUpperCase())),t.shiftKey&&(i=i.concat("SHIFT+".toUpperCase())),t.altKey&&(i=i.concat("ALT+".toUpperCase())),e.has(t.key)||(i=i.concat(t.key.toUpperCase())),this.keyMap.has(i)&&console.log(i)},t}();e.default=i},362:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PointerInputEvent=e.PointerEventDetector=void 0;var n=i(950),r=function(){function t(){this._inputEvent=null,this._characterDetected=null}return Object.defineProperty(t.prototype,"inputEvent",{get:function(){return this._inputEvent},set:function(t){this._inputEvent=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"characterDetected",{get:function(){return this._characterDetected},set:function(t){this._characterDetected=t},enumerable:!1,configurable:!0}),t}();e.PointerEventDetector=r;var o=function(){function t(t,e,i,r,o,s,a,l,h,p){this._device="mouse",this._otherPosition=Array(),this._tiltPosition=new n.Vector2,this._twist=0,this._device=t,this._pressure=e,this._height=i,this._width=r,this._position=o,this._otherPosition=s,this._tiltPosition=a,this._twist=l,this._time=h,this._type=p}return Object.defineProperty(t.prototype,"device",{get:function(){return this._device},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pressure",{get:function(){return this._pressure},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPosition",{get:function(){return this._otherPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tiltPosition",{get:function(){return this._tiltPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"twist",{get:function(){return this._twist},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this._time},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t}();e.PointerInputEvent=o;var s=function(){function t(t,e,i){this.swipeStartPosition=new n.Vector2,this.swipeStarted=!1,this.isPointerPressed=!1,this.device="mouse",this.position=new n.Vector2,this.otherPosition=Array(),this.tiltPosition=new n.Vector2,this.isDraging=!1,this.twist=0,this.canvas=t,this.game=e,this.gameInputHandle=i,this.setEventListeners()}return t.prototype.pointerEventHandle=function(t){var e,i="move";this.device=t.pointerType,this.position.setX=t.clientX-this.canvas.getBoundingClientRect().left,this.position.setY=t.clientY- -this.canvas.getBoundingClientRect().top,e=t.timeStamp/1e3,this.height=t.height,this.width=t.width,this.pressure=t.pressure,this.tiltPosition.setY=t.tiltY,this.tiltPosition.setX=t.tiltX,this.twist=t.twist,"pointermove"!=t.type&&"pointerover"!=t.type||(this.isPointerPressed?(i="drag",this.isDraging=!0):this.isPointerPressed||(i="move")),"pointerdown"==t.type&&(i="press",this.isPointerPressed=!0,2==t.button&&(i="right press",this.isPointerPressed=!1)),"pointerup"==t.type&&(this.isDraging||(i="release",2==t.button&&(i="right release")),this.isPointerPressed=!1,this.isDraging=!1),this.gameInputHandle(new o(this.device,this.pressure,this.height,this.width,this.position,this.otherPosition,this.tiltPosition,this.twist,e,i))},t.prototype.swipeEventHandle=function(t,e){var i=new n.Vector2,r="move",s=e.timeStamp/1e3;if("touchstart"==t)this.swipeStartPosition.setX=e.touches[0].clientX,this.swipeStartPosition.setY=e.touches[0].clientY,this.position=this.swipeStartPosition,this.swipeStarted=!0;else if("touchmove"==t&&this.swipeStarted){var a=new n.Vector2(e.touches[0].clientX,e.touches[0].clientY);this.otherPosition=Array(),this.otherPosition.push(a),i=this.swipeStartPosition.substr(a),r=(i=new n.Vector2(Math.abs(i.x),Math.abs(i.y))).x>i.y?i.x>0?"swipe right":"swipe left":i.y>0?"swipe down":"swipe up",this.swipeStartPosition=new n.Vector2,this.swipeStarted=!1}this.gameInputHandle(new o(this.device,this.pressure,this.height,this.width,this.position,this.otherPosition,this.tiltPosition,this.twist,s,r))},t.prototype.setEventListeners=function(){var t=this;this.canvas.ondragstart=function(){return!1},this.canvas.style.touchAction="none",this.canvas.addEventListener("touchstart",(function(e){t.game.isplaying&&t.swipeEventHandle("touchstart",e)}),!1),this.canvas.addEventListener("touchmove",(function(e){t.game.isplaying&&t.swipeEventHandle("touchmove",e)}),!1),this.canvas.addEventListener("pointerdown",(function(e){t.game.isplaying&&t.pointerEventHandle(e)})),this.canvas.addEventListener("pointermove",(function(e){t.game.isplaying&&t.pointerEventHandle(e)})),this.canvas.addEventListener("pointerover",(function(e){t.game.isplaying&&t.pointerEventHandle(e)})),this.canvas.addEventListener("pointerup",(function(e){t.game.isplaying&&t.pointerEventHandle(e)}))},t}();e.default=s},539:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PointerEventManager=e.KeyboardEventManager=void 0;var r=n(i(774));e.KeyboardEventManager=r.default;var o=n(i(362));e.PointerEventManager=o.default},670:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(950),r=function(){function t(){this.propertyMap=new Map,this.readonlyPropertySet=new Set}return t.prototype.scheme=function(t){for(var e in t){var i=t[e];if("object"!=typeof i||i instanceof n.Vector2||i instanceof n.Color){var r="number"==typeof i?"number":"string"==typeof i?"string":"boolean"==typeof i?"boolean":Array.isArray(i)?"Array<string>":i instanceof n.Vector2?"Vector2":"Color";this.propertyMap.set(e,{value:i,readonly:!1,type:r})}else this.propertyMap.set(e,{value:i.value,type:i.type,readonly:i.readonly}),1==i.readonly&&this.readonlyPropertySet.add(e)}},t.prototype.get=function(t){return this.propertyMap.has(t)?this.propertyMap.get(t).value:null},t.prototype.set=function(t,e){this.propertyMap.has(t)&&!this.readonlyPropertySet.has(t)&&this.propertyMap.set(t,{value:e,readonly:this.propertyMap.get(t).readonly,type:this.propertyMap.get(t).type})},t.prototype.override=function(t,e){this.readonlyPropertySet.has(t)&&this.propertyMap.set(t,{value:e,readonly:this.propertyMap.get(t).readonly,type:this.propertyMap.get(t).type})},t.prototype.has=function(t){return this.propertyMap.has(t)},t.prototype.delete=function(t){this.propertyMap.delete(t)},t.prototype.allProperties=function(){return Array.from(this.propertyMap).filter((function(t){return!t[1].readonly})).map((function(t){return{name:t[0],value:t[1].value,type:t[1].type}}))},t}();e.default=r},328:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.renderMap=new Map,this.renderIndexArray=Array()}return t.prototype.add=function(t,e){this.renderMap.has(t)?(this.renderMap.get(t).push(e),this.renderIndexArray.includes(t)||this.renderIndexArray.push(t)):(this.renderIndexArray.push(t),this.renderMap.set(t,[e]))},t.prototype.render=function(t,e,i,n){var r=this;this.renderIndexArray.sort(),this.renderIndexArray.forEach((function(o){r.renderMap.has(o)&&r.renderMap.get(o).forEach((function(r){r.get("is destroyed")||r.render(t,e,i,n)}))})),this.renderIndexArray.length=0,this.renderMap.clear()},t}();e.default=i},82:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.storageMap=new Map,this.predefineCharacterList=Array(),this.character=t}return Object.defineProperty(t.prototype,"characterTree",{get:function(){return this._characterTree},set:function(t){this._characterTree=t},enumerable:!1,configurable:!0}),t.prototype.list=function(){return Array.from(this.storageMap.values())},t.prototype.listPredefineCharacter=function(){return this.predefineCharacterList},t.prototype.nativeAdd=function(t){this.storageMap.set(t.get("name"),t)},t.prototype.add=function(t){this.predefineCharacterList.push(t)},t.prototype.has=function(t){var e=!1,i=t.split("/"),n=this.character;return 1==i.length?e=this.storageMap.has(i[0]):i.length>1?i.forEach((function(t){null!=n&&n.has(t)?(n=n.child(t),e=!0):e=!1})):e=!1,e},t.prototype.clear=function(){this.storageMap.clear(),this.predefineCharacterList.length=0},t.prototype.child=function(t){var e=this,i=null,n=t.split("/");return 1==n.length?i=this.storageMap.has(n[0])?this.storageMap.get(n[0]):null:n.length>1?n.forEach((function(t){i=t!=String()?null==i?e.storageMap.has(t)?e.storageMap.get(t):null:i.has(t)?i.child(t):null:null})):i=null,i},t}();e.default=i},264:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(607),r=function(){function t(t,e,i,n,r){this.canvas=t,this.game=e,this.character=i,this.render=r,this.storage=n}return t.prototype.update=function(t){var e=this,i=parseInt(getComputedStyle(this.canvas).width);i<=480?this.character.emit("extra small size",i):i>480&&i<=768?this.character.emit("small size",i):i>768&&i<=1024?this.character.emit("medium size",i):i>1024&&i<=1200?this.character.emit("large size",i):i>1200&&this.character.emit("extra large size",i);var r=this.storage.list(),o=this.storage.listPredefineCharacter();o.forEach((function(t){t.get("is initalize")||(t.initalize(e.canvas,e.game,e.character),r.push(t))})),o.length=0,this.storage.clear(),this.storage.characterTree={name:this.character.get("name"),type:this.character.type,path:this.character.get("path"),children:new Map},r.forEach((function(i){if(i.get("is destroyed"))i.emit("final");else{var r=String();r=e.character instanceof n.Game?r.concat(i.get("name")):r.concat(e.character.get("path")).concat("/").concat(i.get("name")),i.set("path",r),i.update(t),e.storage.nativeAdd(i),e.render.add(i.get("z index"),i),e.storage.characterTree.children.set(i.get("name"),i.tree)}}))},t}();e.default=r},305:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Render=e.Updater=e.Storage=void 0;var r=n(i(328));e.Render=r.default;var o=n(i(82));e.Storage=o.default;var s=n(i(264));e.Updater=s.default}},e={},i=function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}(607);KaroEngine=i})();